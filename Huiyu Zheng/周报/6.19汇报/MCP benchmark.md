## NLP的benchmark

NLP的benchmark就是说拿一些基础的模型来对一批数据集进行测试和匹配。

这些数据集有其特点，一般会选择不同的测试方式（有多种数据集）进行测试

比如：抽取式，理解给定的文本找出答案。多选式：预测下一句是什么，提供ABCD几个选项供模型选择。

特点：数据集是固定的，改变的是模型。

# MCP基准测试

MCP是什么？

- MCP其实是一种规范函数调用的协议

## MCP的特点是什么？

MCP其特点有两个。

1、**MCP Server**，属于MCP独有的，这是规范过后的function call 是基于规定格式的prompt和工具集

2、并且因其规范的特点，可以使用它制作**工具链**

## 1、针对MCP Server的基准测试

### 效率角度

很明显的是不同的服务 MCP Server 的快慢不一样。

MCP Server 分为本地调用和远程调用两种方式

> 远端调用存在通信问题，可能会对响应时间产生影响。

### 准确率的角度（测试模型对MCP的准确性）

测试单一 MCP Server 的延迟和成功率，使用不同的模型其准确率是不一样的。

我们的目的可以是检测不同模型对MCP服务的准确率。也就是选择几十或者几百几千个服务，然后通过运行多次查看其成功的概率，记录成功率。

## 2、针对工具链的基准测试

### 效率角度

如果要针对这个点做基准测试，我只需要提供工具链和测试响应时间的函数即可。

### 准确率的角度

这个和单一MCP服务类似，可以根据工具链的长短和工具的行业来作难度区分。



可能存在的问题1：使用MCP调用工具对环境有一定的要求。或许缺少自动化的检测方式。

可能存在的问题2：不是所有大模型都支持函数调用，需要选择合适的模型作为基准模型。



#### 动态代理链的实现

- **Orchestrator（编排者）**：一个主代理负责协调整个工作流。它通过 MCP 的工具发现和调用机制，触发专门的子代理来完成子任务。
- **子代理的协作**：每个子代理通过 MCP 服务器暴露其功能（例如，处理特定类型的数据或调用外部 API）。主代理可以根据任务需求动态选择合适的子代理。
- 示例：
  - 一个主代理接收用户请求“分析最近的销售数据并生成报告”。
  - 主代理调用子代理 A（通过 MCP 服务器访问 Salesforce 数据）。
  - 子代理 A 返回数据后，主代理调用子代理 B（通过 MCP 服务器调用 Pandas 进行数据分析）。
  - 最后，主代理调用子代理 C（通过 MCP 服务器将结果保存到 Google Drive）。


## MCP Server 的调用

MCP Server 有远程调用（SSE）和本地调用（STDIO）的两种方式，可以根据所需进行选择。本地调用可以直接访问本地资源，适合离线环境或需要深度集成本地数据的场景。远程无法访问本地资源。

远程调用MCP Server，开发者的编码环境通过 HTTP 请求与服务器交互，请求智能代码建议、语法检查、[代码分析](https://cloud.tencent.com/product/tcap?from_column=20065&from=20065)等服务。此种模式极大地降低了客户端的资源占用，也减轻了本地环境的复杂配置。

**通信流程**：

1. 客户端提交结构化提示（Structured Prompt）。
2. 数据通过安全传输层（HTTP/SSE）交换。
3. 服务器动态调用所需的工具或资源。
4. 服务器请求 LLM 完成（可选，需人类审查）。
5. 结果以结构化格式返回。


## MCP Server 的身份认证

OAuth 2.0协议

Server-Sent Events (SSE)：远程 MCP Server 使用 SSE 进行服务器到客户端的通信，客户端通过 HTTP POST 发送请求。身份验证信息（如 OAuth 访问令牌）通常包含在 HTTP 请求头中。

授权码模式：适用于人类用户授权场景，例如通过浏览器登录 GitHub 账户以允许 MCP Server 访问你的 GitHub 数据。

客户端凭据模式：适用于应用程序之间的自动授权，例如 AI 智能体调用企业内部的 MCP Server。



